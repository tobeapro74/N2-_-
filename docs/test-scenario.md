# 테스트 시나리오

이 문서는 N2골프 자금관리 시스템의 테스트 시나리오를 기록합니다.

---

## 개발 환경 및 UI 프레임워크

### 기술 스택

| 구분 | 기술 | 비고 |
|------|------|------|
| 프론트엔드 (Next.js) | shadcn/ui | Radix UI 기반 컴포넌트 |
| 프론트엔드 (Express) | Bootstrap 5 | EJS 템플릿 |
| 스타일링 | Tailwind CSS | shadcn/ui와 함께 사용 |

### shadcn/ui 컴포넌트 테스트

Next.js 프로젝트에서는 UI 개발 시 **shadcn/ui**를 사용합니다.

```bash
# 초기화
npx shadcn@latest init

# 컴포넌트 설치
npx shadcn@latest add button
npx shadcn@latest add card
npx shadcn@latest add table
```

---

## 일정 관리

### TC-SCH-001: 일정 목록 정렬 순서 확인

**목적**: 일정 목록이 날짜 오름차순으로 정렬되는지 확인

**사전 조건**:
- 로그인된 상태
- 여러 날짜의 일정이 등록되어 있음 (예: 3/7, 11/21)

**테스트 단계**:
1. 일정관리 > 전체일정 메뉴 접속
2. 일정 목록 확인

**예상 결과**:
- 가까운 날짜(3/7)가 목록 상단에 표시
- 먼 날짜(11/21)가 목록 하단에 표시
- 날짜 기준 오름차순 정렬

**관련 코드**: `routes/schedules.js:64`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 내림차순 → 오름차순 변경 | 4e8239a |

---

## 예약 관리

### TC-RSV-001: 예약 신청

**목적**: 회원이 일정에 예약을 신청할 수 있는지 확인

**사전 조건**:
- 로그인된 상태 (일반 회원)
- 예약 가능한 일정이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. "예약 신청" 버튼 클릭

**예상 결과**:
- 예약이 성공적으로 등록됨
- 예약 목록에 본인 이름 표시

---

### TC-RSV-002: 예약 취소

**목적**: 회원이 본인의 예약을 취소할 수 있는지 확인

**사전 조건**:
- 로그인된 상태
- 해당 일정에 본인의 예약이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. "예약 취소" 버튼 클릭
3. 확인 다이얼로그에서 "확인" 선택

**예상 결과**:
- 예약이 성공적으로 취소됨
- 예약 목록에서 본인 이름 제거

**관련 이슈**: MongoDB Atlas 연동 후 CSRF 토큰 문제 해결 (2024-12-29)

---

### TC-RSV-003: 관리자 예약 삭제 (소프트 삭제)

**목적**: 관리자가 예약을 소프트 삭제할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 해당 일정에 예약이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. 예약 목록에서 "관리" 컬럼의 휴지통 버튼 클릭
3. 확인 다이얼로그에서 "확인" 선택

**예상 결과**:
- 예약 상태가 "삭제"로 변경됨
- 예약 목록에서 취소선으로 표시됨
- DB에서 물리적으로 삭제되지 않음 (status 필드만 변경)

**관련 코드**: `routes/reservations.js:admin/delete`, `views/schedules/detail.ejs:283`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 소프트 삭제 구현, 취소선 표시 | 26b102f |

---

### TC-RSV-004: 관리자 예약 완전 삭제 (하드 삭제)

**목적**: 관리자가 예약을 DB에서 완전히 삭제할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 해당 일정에 예약이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. 예약 목록에서 "완전삭제" 컬럼의 빨간색 버튼 클릭
3. 첫 번째 확인 다이얼로그에서 "확인" 선택
4. 두 번째 확인 다이얼로그에서 "확인" 선택 (이중 확인)

**예상 결과**:
- 예약이 DB에서 물리적으로 삭제됨
- 예약 목록에서 완전히 사라짐
- "예약이 완전히 삭제되었습니다." 알림 표시

**관련 코드**: `routes/reservations.js:admin/hard-delete`, `views/schedules/detail.ejs:291-294`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 완전삭제 API 추가 | c353cc3 |
| 2024-12-29 | 완전삭제 버튼 UI 추가 | d941615 |

---

### TC-RSV-005: 관리자 상태 변경

**목적**: 관리자가 예약 상태를 드롭다운으로 변경할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 해당 일정에 예약이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. 예약 목록에서 "상태" 컬럼의 드롭다운 클릭
3. 원하는 상태 선택 (확정/신청/대기자/취소/삭제)
4. 확인 다이얼로그에서 "확인" 선택

**예상 결과**:
- 상태가 변경됨
- 드롭다운 배경색이 상태에 맞게 변경됨
  - 확정: 녹색
  - 신청: 노란색
  - 대기자: 빨간색
  - 취소: 회색
  - 삭제: 검정색

**관련 코드**: `routes/reservations.js:admin/update-status`, `views/schedules/detail.ejs:226-236`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 상태 드롭다운 및 색상 구분 추가 | 2f4d6e2 |

---

### TC-RSV-006: 관리자 예약 신청 차단

**목적**: 관리자가 예약을 신청할 수 없는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 예약 가능한 일정이 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. "관리자는 예약 신청이 불가능합니다." 안내 확인
3. 예약 신청 버튼이 표시되지 않는지 확인

**예상 결과**:
- 희망 티타임 선택 UI가 표시되지 않음
- 예약 신청 버튼이 표시되지 않음
- "관리자는 예약 신청이 불가능합니다." 안내 메시지 표시

**관련 코드**: `views/schedules/detail.ejs:144-147`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 관리자 예약 UI 숨김 | 1eccc51 |
| 2024-12-29 | 관리자 예약 완전 차단 | 742f53b |

---

## 회원 관리

### TC-MEM-001: 신규 회원 등록

**목적**: 관리자가 새로운 회원을 등록할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인

**테스트 단계**:
1. 회원관리 메뉴 접속
2. "회원 등록" 버튼 클릭
3. 필수 정보 입력 (이름, 내선번호 등)
4. "등록" 버튼 클릭

**예상 결과**:
- 회원이 성공적으로 등록됨
- 회원 목록에 새 회원 표시

---

### TC-MEM-002: 신규 회원 환영 배너

**목적**: 가입 10일 이내 회원에게 환영 배너가 표시되는지 확인

**사전 조건**:
- 가입일이 현재로부터 10일 이내인 회원 존재
- 해당 회원이 로그인하지 않은 상태

**테스트 단계**:
1. 홈 화면 접속

**예상 결과**:
- 환영 배너가 표시됨
- 3가지 환영 메시지 중 하나가 표시 (일별 교체)
- 여러 명일 경우 10초마다 회전

**관련 코드**: 홈 화면 환영 배너 컴포넌트

---

## 재정 관리

### TC-FIN-001: 입금 등록

**목적**: 관리자가 입금 내역을 등록할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인

**테스트 단계**:
1. 재정관리 > 입금 메뉴 접속
2. "입금 등록" 버튼 클릭
3. 카테고리, 금액, 날짜 등 입력
4. "등록" 버튼 클릭

**예상 결과**:
- 입금 내역이 성공적으로 등록됨
- 3자리 콤마 포맷으로 금액 표시

---

### TC-FIN-002: 회비 납부

**목적**: 관리자가 회원의 회비 납부를 처리할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 활성 회원 존재

**테스트 단계**:
1. 재정관리 > 회비 메뉴 접속
2. 특정 회원의 월별 납부 버튼 클릭
3. 금액 확인 후 납부 처리

**예상 결과**:
- 회비 납부가 성공적으로 처리됨
- 납부 상태가 "납부완료"로 변경
- 입금 내역에도 자동 등록

---

## 날씨 정보

### TC-WTH-001: 골프장 날씨 표시

**목적**: 골프장별 실시간 날씨 정보가 표시되는지 확인

**사전 조건**:
- 활성화된 골프장 존재

**테스트 단계**:
1. 홈 화면 접속
2. 골프장 날씨 카드 확인

**예상 결과**:
- 각 골프장의 현재 날씨 표시
- 날씨 아이콘이 상태에 맞게 표시 (눈 = 파란색 아이콘)
- 온도, 풍속 등 상세 정보 표시

**관련 변경**: 눈 날씨 아이콘 색상 회색 → 파란색 (2024-12-29)

---

## 팀 배정 관리

### TC-TEAM-001: 자동 팀 배정

**목적**: 관리자가 팀 배정 버튼을 눌러 자동 팀 배정이 되는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 해당 일정에 예약자가 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. "팀 배정" 버튼 클릭
3. 확인 다이얼로그에서 "확인" 선택

**예상 결과**:
- 예약자들이 팀(1~3팀)에 자동 배정됨
- 희망 티타임 우선 적용
- 각 팀당 최대 4명까지 배정
- 상태가 "확정"으로 변경됨

**관련 코드**: `routes/schedules.js:assign-teams`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 희망 티타임 기반 팀 배정 로직 구현 | 7163469 |

---

### TC-TEAM-002: 수동 팀 변경

**목적**: 관리자가 팀 배정 후 수동으로 팀을 변경할 수 있는지 확인

**사전 조건**:
- 관리자 계정으로 로그인
- 해당 일정에 팀 배정된 예약자 존재

**테스트 단계**:
1. 일정 상세 페이지 접속
2. 예약 목록에서 "팀" 컬럼의 드롭다운 클릭
3. 다른 팀 선택

**예상 결과**:
- 팀 번호가 변경됨
- 티타임이 해당 팀의 티타임으로 자동 변경됨
- 팀 인원이 5명이 되면 교환 모달 표시

**관련 코드**: `routes/reservations.js:admin/update-team`, `views/schedules/detail.ejs:256-269`

**변경 이력**:
| 날짜 | 변경 내용 | 커밋 |
|------|----------|------|
| 2024-12-29 | 수동 팀 변경 기능 추가 | 816289c |
| 2024-12-29 | 팀 변경 시 티타임 자동 연동 | e67d9b2 |
| 2024-12-29 | 팀 균형 검사 및 교환 기능 | a18ae3a |

---

*마지막 업데이트: 2024-12-29 23:30*
