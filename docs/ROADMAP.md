# N2골프 프로젝트 로드맵

## 프로젝트 개요

**N2골프 동호회 자금/예약 관리 시스템**은 NH투자증권 사내 골프 동호회를 위한 종합 관리 플랫폼입니다. 회원 관리, 일정 관리, 예약 관리, 자금(회비/입출금) 관리 기능을 제공합니다.

### 주요 사용자
- **일반 회원**: 예약 신청, 일정 확인, 자금 현황 조회
- **관리자**: 회원 관리, 일정 생성, 예약 관리, 입출금 관리, 회비 관리

## 프로젝트 목표

1. **회원 관리 효율화**: 76명 회원의 정보를 체계적으로 관리
2. **예약 시스템 자동화**: 골프 라운딩 예약 신청 및 관리 간소화
3. **자금 투명성 확보**: 회비 및 입출금 내역의 투명한 관리
4. **접근성 향상**: PWA 지원으로 모바일에서도 앱처럼 사용 가능

## 기술 스택

### 백엔드
| 기술 | 버전 | 용도 |
|------|------|------|
| Node.js | 18+ | 런타임 환경 |
| Express.js | 4.18.2 | 웹 프레임워크 |
| express-session | 1.17.3 | 세션 관리 |
| bcryptjs | 2.4.3 | 비밀번호 해싱 |
| moment | 2.29.4 | 날짜/시간 처리 |

### 프론트엔드
| 기술 | 버전 | 용도 |
|------|------|------|
| EJS | 3.1.9 | 템플릿 엔진 |
| Bootstrap | 5.3.2 | UI 프레임워크 |
| Bootstrap Icons | 1.11.1 | 아이콘 |
| Chart.js | 최신 | 차트/그래프 |

### 데이터베이스
| 기술 | 용도 |
|------|------|
| JSON 파일 | 경량 데이터 저장 (n2golf.json) |

### 개발 도구
| 기술 | 버전 | 용도 |
|------|------|------|
| nodemon | 3.0.2 | 개발 시 자동 재시작 |

## 프로젝트 구조

```
N2골프_자금관리/
│
├── 📄 app.js                    # Express 앱 진입점
├── 📄 package.json              # 프로젝트 설정 및 의존성
├── 📄 CLAUDE.md                 # Claude Code 규칙
├── 📁 docs/                     # 기술 문서
│   ├── ROADMAP.md               # 프로젝트 로드맵 (이 파일)
│   ├── ARCHITECTURE.md          # 시스템 아키텍처
│   └── TROUBLESHOOTING.md       # 문제 해결 가이드
├── 📄 README.md                 # 프로젝트 설명
│
├── 📁 data/                     # 데이터 저장소
│   └── n2golf.json              # JSON 데이터베이스
│
├── 📁 models/                   # 데이터 모델
│   ├── database.js              # DB 헬퍼 함수
│   └── weather.js               # 날씨 서비스 (Open-Meteo API)
│
├── 📁 routes/                   # API 라우터
│   ├── auth.js                  # 인증 (로그인/로그아웃)
│   ├── finance.js               # 자금 관리
│   ├── members.js               # 회원 관리
│   ├── reservations.js          # 예약 관리
│   ├── schedules.js             # 일정 관리
│   └── weather.js               # 날씨 API
│
├── 📁 views/                    # EJS 템플릿
│   ├── partials/                # 공통 컴포넌트
│   │   ├── header.ejs
│   │   └── footer.ejs
│   ├── auth/                    # 인증 관련 화면
│   ├── finance/                 # 자금 관련 화면
│   ├── members/                 # 회원 관련 화면
│   ├── reservations/            # 예약 관련 화면
│   ├── schedules/               # 일정 관련 화면
│   └── weather/                 # 날씨 상세 화면
│
├── 📁 public/                   # 정적 파일
│   ├── css/style.css            # 커스텀 스타일
│   ├── js/main.js               # 클라이언트 스크립트
│   ├── icons/                   # PWA 아이콘
│   ├── manifest.json            # PWA 매니페스트
│   └── sw.js                    # 서비스 워커
│
└── 📁 scripts/                  # 유틸리티 스크립트
    ├── init-db.js               # DB 초기화
    ├── create-icons.js          # 아이콘 생성
    └── generate-icons.html      # 아이콘 생성 도구
```

## 주요 기능

### 1. 인증 시스템
- [x] 로그인/로그아웃
- [x] 비밀번호 변경
- [x] 세션 기반 인증

### 2. 회원 관리
- [x] 회원 목록 조회
- [x] 회원 상세 정보
- [x] 회원 등록/수정/삭제 (관리자)
- [x] 부서별 회원 분류

### 3. 일정 관리
- [x] 연간 일정 자동 생성 (3월~11월)
- [x] 개별 일정 생성/수정/삭제
- [x] 3개 골프장 지원
  - 양지파인GC (매월 3째주 토요일)
  - 대영힐스GC (홀수달 1째주 토요일)
  - 대영베이스GC (짝수달 1째주 토요일)
- [x] 일정 상태 관리 (오픈전/예약가능/마감/완료/취소)
- [x] 관리자용 일괄 상태 변경 도구 (날짜 범위 지정)

### 4. 예약 관리
- [x] 예약 신청
- [x] 예약 취소
- [x] 예약 현황 조회
- [x] 예약 관리 (관리자)

### 5. 자금 관리
- [x] 대시보드 (잔액, 월별 현황)
- [x] 입금 내역 관리
- [x] 출금 내역 관리
- [x] 회비 납부 관리
- [x] 카테고리별 통계

### 6. 코스 가이드
- [x] 양지파인GC 코스 가이드 (Pine, Lake, Valley)
- [x] 대영힐스GC 코스 가이드 (Hill, Lake, Valley)
- [x] 대영베이스GC 코스 가이드 (Base, Hill, Valley)
- [x] 홀별 정보 (파/거리/핸디캡/공략 포인트)

### 7. 날씨 정보
- [x] 실시간 날씨 조회 (Open-Meteo API)
- [x] 1주일 예보
- [x] 골프 플레이 적합도 평가
- [x] 라운딩 조언 (복장/클럽/준비사항)
- [x] 반응형 UI (데스크탑/모바일)

### 8. 커뮤니티 (일정별 댓글)
- [x] 댓글 CRUD (작성/수정/삭제)
- [x] 이미지 첨부 (Cloudinary CDN)
- [x] URL 링크 미리보기 (Open Graph 파싱)
- [x] 유튜브 썸네일 자동 생성
- [x] 좋아요/싫어요 리액션
- [x] 내가 누른 좋아요/싫어요 시각적 표시 (채워진 아이콘)
- [x] 실시간 시간 표시 (방금 전, n시간 전)

### 9. UI/UX 개선
- [x] 모든 페이지 뒤로가기 버튼
- [x] 모바일 최적화 (가로 스크롤, 컴팩트 카드)
- [x] 반응형 레이아웃
- [x] 모바일 터치 피드백 (버튼, 카드, 리스트 등)
- [x] 스크롤/탭 구분 (터치 이동 거리 체크)
- [x] 전역 로딩 인디케이터 ("조회중..." 표시)
- [x] Pull-to-Refresh (당겨서 새로고침) - 홈 화면

### 10. 실시간 교통 현황
- [x] 카카오 모빌리티 API 연동
- [x] 여의도역/잠실역 출발 소요시간 조회
- [x] 교통 상태 표시 (원활/보통/정체)
- [x] 하루 1회 자동 조회 + localStorage 캐싱
- [x] 수동 새로고침 기능

### 11. PWA 지원
- [x] 매니페스트 설정
- [x] 서비스 워커
- [x] 홈 화면 추가 기능
- [x] 오프라인 캐싱

### 12. 성능 최적화
- [x] gzip 압축 (응답 크기 60-70% 감소)
- [x] 정적 파일 캐싱 (1일)
- [x] MongoDB 연결 풀 최적화 (maxPoolSize 50)
- [x] MongoDB 인덱스 (14개)
- [x] Cloudinary 이미지 자동 최적화 (WebP/AVIF)
- [x] 이미지 Lazy Loading
- [x] Promise.all 병렬 쿼리 처리
- [x] MongoDB projection

## 향후 개발 계획

### Phase 1 (완료)
- [x] 기본 CRUD 기능
- [x] 인증 시스템
- [x] 반응형 UI

### Phase 2 (완료)
- [x] 3개 골프장 분리 (대영힐스/대영베이스)
- [x] 코스 가이드 (홀별 상세 정보)
- [x] PWA 지원
- [x] 금액 3자리 콤마 포맷

### Phase 2.5 (완료)
- [x] 실시간 날씨 정보 (Open-Meteo API)
- [x] 골프 플레이 적합도 평가
- [x] 모바일 UI 최적화
- [x] 전체 페이지 뒤로가기 버튼

### Phase 2.7 (완료)
- [x] 커뮤니티 댓글 기능
- [x] 이미지 첨부 (Cloudinary 연동)
- [x] URL 링크 미리보기 (Open Graph)
- [x] 유튜브 썸네일 자동 생성
- [x] MongoDB Atlas 연동 (Vercel 서버리스)

### Phase 2.8 - 성능 최적화 (완료)
- [x] gzip 압축 (응답 크기 60-70% 감소)
- [x] 정적 파일 캐싱 (1일)
- [x] MongoDB 연결 풀 최적화 (maxPoolSize 50)
- [x] MongoDB 인덱스 생성 (14개)
- [x] Cloudinary 이미지 자동 최적화 (f_auto, q_auto)
- [x] 이미지 Lazy Loading
- [x] Promise.all 병렬 쿼리 처리
- [x] MongoDB projection (필요 필드만 조회)

### Phase 2.9 - 교통 & 일정 관리 (완료)
- [x] 실시간 교통 현황 (카카오 모빌리티 API)
- [x] 교통 API 하루 1회 자동 조회 + 캐싱
- [x] 일정 상태 '오픈전' 추가
- [x] 오픈전 상태에서 예약 신청 차단 (커뮤니티 사용 가능)
- [x] 관리자용 일정 일괄 상태 변경 도구
- [x] Vercel Analytics 연동

### Phase 2.95 - UX 개선 (완료)
- [x] 전역 로딩 인디케이터 시스템
- [x] Pull-to-Refresh (당겨서 새로고침) - 홈 화면
- [x] 모바일 터치 피드백 강화 (일정 카드, 날씨 카드 등)
- [x] 스크롤/탭 구분 개선 (10px 임계값)
- [x] 좋아요/싫어요 버튼 상태 시각화 (채워진 아이콘)
- [x] Service Worker 캐시 관리 (v12)

### Phase 2.96 - 일상톡톡 커뮤니티 (완료)
- [x] 일상톡톡 커뮤니티 기능 (홈화면)
- [x] 게시글/댓글/대댓글 CRUD
- [x] 이미지 첨부 (Cloudinary)
- [x] 좋아요/싫어요 리액션
- [x] URL 링크 미리보기
- [x] 커뮤니티 입력창 크기 통일 및 최적화

### Phase 2.97 - 예약 자동 오픈 시스템 (완료)
- [x] Vercel Cron Job 기반 스케줄 자동 오픈 (매일 KST 09:00)
- [x] 스케줄 open_at 필드 추가 (오픈 예정 시간 관리)
- [x] 예약 신청 시 open_at 안전장치 (Cron 지연 대비)
- [x] 일정 상세 페이지에 오픈 예정 시간 표시
- [x] 예약 오픈 시 전체 회원 푸시 + 인앱 알림 발송

### Phase 3 (예정)
- [ ] 스코어카드 기록 기능
- [ ] 회원별 라운딩 통계
- [ ] 시상 내역 관리
- [ ] 푸시 알림

### Phase 4 (예정)
- [ ] 관리자 대시보드 강화
- [ ] 리포트 출력 기능
- [ ] 카카오톡 알림 연동
- [ ] 스코어카드 사진 업로드

## 실행 방법

```bash
# 의존성 설치
npm install

# 데이터베이스 초기화 (최초 1회)
npm run init-db

# 개발 모드 실행
npm run dev

# 프로덕션 모드 실행
npm start
```

**접속 주소**: http://localhost:3000

## 기본 계정

| 역할 | 이름 | 비밀번호 |
|------|------|----------|
| 관리자 | 관리자 | admin123 |
| 일반 회원 | (회원 이름) | 1234 |

---

*마지막 업데이트: 2026년 2월 13일*
